
#!/bin/ksh

# Gzipa, Manda pro TSM o gzipado, Remove os gzipados

find /usr/WebSphere85/AppServer -xdev \( -name 'SystemOut_*log' -o -name 'SystemErr_*log' -o -name 'trace_*log' -o -name 'heapdump.*phd' -o -name 'javacore.*txt' \)| while IFS= read -r line; do gzip "$line";  done ; find /usr/WebSphere85/AppServer -xdev \( -name 'SystemOut_*log.gz' -o -name 'SystemErr_*log.gz' -o -name 'trace_*log.gz' -o -name 'heapdump.*phd.gz' -o -name 'javacore.*txt.gz' \)| while IFS= read -r line; do dsmc incremental "$line" -subdir=yes;  done; find /usr/WebSphere85/AppServer -xdev \( -name 'SystemOut_*log.gz' -o -name 'SystemErr_*log.gz' -o -name 'trace_*log.gz' -o -name 'heapdump.*phd.gz' -o -name 'javacore.*txt.gz' \)| while IFS= read -r line; do rm -r "$line";  done; find /web/logs/ -xdev \( -name 'SystemOut_*log' -o -name 'SystemErr_*log' -o -name 'trace_*log' -o -name 'heapdump.*phd' -o -name 'javacore.*txt' \)| while IFS= read -r line; do gzip "$line";  done ; find /web/logs/ -xdev \( -name 'SystemOut_*log.gz' -o -name 'SystemErr_*log.gz' -o -name 'trace_*log.gz' -o -name 'heapdump.*phd.gz' -o -name 'javacore.*txt.gz' \)| while IFS= read -r line; do dsmc incremental "$line" -subdir=yes;  done; find /web/logs/ -xdev \( -name 'SystemOut_*log.gz' -o -name 'SystemErr_*log.gz' -o -name 'trace_*log.gz' -o -name 'heapdump.*phd.gz' -o -name 'javacore.*txt.gz' \)| while IFS= read -r line; do rm -r "$line";  done
